#compdef thor

# List of commands built into thor.
_thor_commands() {
  _values "Thor" "list" "install" "uninstall" "help" "installed" "update"
}

# Get list of all thor tasks added.
_thor_tasks() {
  compadd `thor list | grep '^thor' | cut -d ' ' -f 2`
}

# Normally, show all of the above.
if (( CURRENT == 2 )); then
  _thor_commands
  _thor_tasks
else
  # If we've typed 'thor install', let us look for a normal file.
  if [[ $words[2] == install ]] ; then
    _files
  elif [[ $words[2] == help ]] ; then
    _thor_commands
    _thor_tasks
  else
    _files
  fi
fi
